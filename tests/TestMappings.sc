TestMappings : UnitTest {
	var testArray;

	setUp {
		testArray = (0, 0.01..1);
	}

	test_linbicurve {
		var expected = [-1, -0.99844608316475, -0.99676274515287, -0.99493920685409, -0.9929637913976, -0.9908238493803, -0.98850567786739, -0.9859944326468, -0.98327403317557, -0.98032705960949, -0.97713464125656, -0.97367633574023, -0.96992999809832, -0.9658716389797, -0.96147527103051, -0.95671274248641, -0.95155355690516, -0.94596467788526, -0.9399103175202, -0.93335170723368, -0.92624684952838, -0.91855024905855, -0.91021262130453, -0.90118057698351, -0.89139628017588, -0.88079707797788, -0.86931509930912, -0.85687682030593, -0.84340259351764, -0.82880613789097, -0.8129939862767, -0.79586488692085, -0.77730915510774, -0.75720797080335, -0.73543261780145, -0.71184365950044, -0.68629004603303, -0.65860814703143, -0.6286207038343, -0.59613569442621, -0.56094510384114, -0.52282359215648, -0.48152705154827, -0.43679104316768, -0.38832910382959, -0.33583091167019, -0.27896029902759, -0.21735309982112, -0.15061481764507, -0.078318099644912, 0.0, 0.078318099644912, 0.15061481764507, 0.21735309982112, 0.27896029902759, 0.33583091167019, 0.38832910382959, 0.43679104316768, 0.48152705154827, 0.52282359215648, 0.56094510384114, 0.59613569442621, 0.6286207038343, 0.65860814703143, 0.68629004603303, 0.71184365950044, 0.73543261780145, 0.75720797080335, 0.77730915510774, 0.79586488692085, 0.8129939862767, 0.82880613789097, 0.84340259351764, 0.85687682030593, 0.86931509930912, 0.88079707797788, 0.89139628017588, 0.90118057698351, 0.91021262130453, 0.91855024905855, 0.92624684952838, 0.93335170723368, 0.9399103175202, 0.94596467788526, 0.95155355690516, 0.95671274248641, 0.96147527103051, 0.9658716389797, 0.96992999809832, 0.97367633574023, 0.97713464125656, 0.98032705960949, 0.98327403317557, 0.9859944326468, 0.98850567786739, 0.9908238493803, 0.9929637913976, 0.99493920685409, 0.99676274515287, 0.99844608316475, 1];
		var test = testArray.collect { |n| n.linbicurve(0) };
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
		expected = [0.0, 0.039942126411478, 0.078318099644912, 0.11518932944479, 0.15061481764507, 0.18465125258471, 0.21735309982112, 0.24877268928663, 0.27896029902759, 0.30796423565996, 0.33583091167019, 0.36260491968509, 0.38832910382959, 0.41304462828643, 0.43679104316768, 0.45960634780331, 0.48152705154827, 0.50258823220521, 0.52282359215648, 0.5422655122951, 0.56094510384114, 0.57889225812624, 0.59613569442621, 0.61270300591792, 0.6286207038343, 0.64391425988797, 0.65860814703143, 0.67272587861895, 0.68629004603303, 0.69932235483538, 0.71184365950044, 0.72387399678705, 0.73543261780145, 0.74653801880326, 0.75720797080335, 0.7674595480013, 0.77730915510774, 0.78677255359541, 0.79586488692085, 0.80460070475719, 0.8129939862767, 0.82105816252048, 0.82880613789097, 0.83625031080174, 0.84340259351764, 0.85027443121691, 0.85687682030593, 0.86322032601584, 0.86931509930912, 0.87517089312333, 0.88079707797788, 0.88620265696885, 0.89139628017588, 0.89638625850413, 0.90118057698351, 0.90578690754643, 0.91021262130453, 0.91446480034402, 0.91855024905855, 0.92247550503767, 0.92624684952838, 0.92987031748645, 0.93335170723368, 0.93669658973639, 0.9399103175202, 0.94299803323519, 0.94596467788526, 0.94881499873476, 0.95155355690516, 0.95418473467379, 0.95671274248641, 0.95914162569488, 0.96147527103051, 0.96371741282371, 0.9658716389797, 0.96794139671992, 0.96992999809832, 0.97184062530138, 0.97367633574023, 0.97544006694322, 0.97713464125656, 0.97876277036068, 0.98032705960949, 0.98183001219952, 0.98327403317557, 0.98466143327928, 0.9859944326468, 0.98727516436151, 0.98850567786739, 0.98968794224857, 0.9908238493803, 0.99191521695632, 0.9929637913976, 0.99397125064694, 0.99493920685409, 0.99586920895547, 0.99676274515287, 0.99762124529484, 0.99844608316475, 0.99923857867917, 1];
		test = testArray.collect { |n| n.linbicurve };
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
		expected = [0, 0.00046617505057612, 0.00097117645413795, 0.0015182379437742, 0.0021108625807201, 0.0027528451859092, 0.0034482966397828, 0.0042016702059599, 0.0050177900473277, 0.0059018821171543, 0.0068596076230315, 0.0078970992779307, 0.0090210005705037, 0.010238508306091, 0.011557418690847, 0.012986177254076, 0.014533932928451, 0.016210596634423, 0.018026904743941, 0.019994487829896, 0.022125945141487, 0.024434925282434, 0.026936213608641, 0.029645826904947, 0.032581115947236, 0.035760876606635, 0.039205470207264, 0.042936953908221, 0.046979221944708, 0.05135815863271, 0.05610180411699, 0.061240533923745, 0.066807253467678, 0.072837608758995, 0.079370214659564, 0.086446902149867, 0.09411298619009, 0.10241755589057, 0.11141378884971, 0.12115929167214, 0.13171646884766, 0.14315292235306, 0.15554188453552, 0.1689626870497, 0.18350126885112, 0.19925072649894, 0.21631191029172, 0.23479407005366, 0.25481555470648, 0.27650457010653, 0.3, 0.35482266975144, 0.40543037235155, 0.45214716987478, 0.49527220931931, 0.53508163816913, 0.57183037268071, 0.60575373021737, 0.63706893608379, 0.66597651450953, 0.6926615726888, 0.71729498609835, 0.74003449268401, 0.761025702922, 0.78040303222312, 0.79829056165031, 0.81480283246102, 0.83004557956234, 0.84411640857542, 0.8571054208446, 0.86909579039369, 0.88016429652368, 0.89038181546235, 0.89981377421415, 0.90852056951638, 0.91655795458452, 0.92397739612312, 0.93082640388846, 0.93714883491317, 0.94298517434099, 0.94837279466986, 0.95334619506358, 0.95793722226414, 0.96217527451968, 0.96608748983361, 0.96969891974049, 0.97303268972136, 0.97611014728579, 0.97895099866882, 0.98157343501816, 0.98399424887959, 0.98622894172664, 0.9882918232229, 0.99019610285276, 0.99195397450717, 0.99357669456621, 0.99507465397832, 0.99645744479786, 0.99773392160701, 0.99891225821532, 1];
		test = testArray.collect { |n| n.linbicurve(inMin: 0, outMin: 0, outCenter: 0.3) };
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
		expected = [0, 0.0013305572273252, 0.0028508929121245, 0.0045880753098487, 0.0065730334431975, 0.0088411077664865, 0.011432679371719, 0.014393888938833, 0.017777458230401, 0.021643628756793, 0.026061234323905, 0.031108926559247, 0.036876575235812, 0.043466868325267, 0.050997140268042, 0.059601461011059, 0.069433023006602, 0.08066686867079, 0.093503006861649, 0.10816997386299, 0.12492890227432, 0.14407817024978, 0.16595871386187, 0.19096009717189, 0.21952744807943, 0.25216938343777, 0.28946706453485, 0.33208454416491, 0.38078058951129, 0.43642219133666, 0.5, 0.52828855445057, 0.55500593817378, 0.58023941534777, 0.60407140342289, 0.62657974231319, 0.64783794863672, 0.66791545583509, 0.68687784095668, 0.70478703884397, 0.72170154442488, 0.73767660376852, 0.75276439452965, 0.76701419637107, 0.78047255192057, 0.79318341878821, 0.80518831314049, 0.81652644530015, 0.8272348478148, 0.83734849641238, 0.84690042423872, 0.85592182975022, 0.8644421786141, 0.87248929994896, 0.88008947722019, 0.88726753408678, 0.89404691548029, 0.90044976418057, 0.90649699313835, 0.91220835378102, 0.91760250052467, 0.92269705170299, 0.92750864711225, 0.93205300236005, 0.93634496019558, 0.94039853898894, 0.94422697851786, 0.94784278321139, 0.95125776299177, 0.95448307184801, 0.95752924426691, 0.96040622964081, 0.96312342476419, 0.96568970452546, 0.96811345089408, 0.97040258029768, 0.97256456947867, 0.97460647991474, 0.97653498088302, 0.97835637124321, 0.98007660001092, 0.98170128578831, 0.98323573511552, 0.98468495980285, 0.98605369330036, 0.98734640615819, 0.98856732062828, 0.98972042445505, 0.99080948390014, 0.99183805604379, 0.99280950040292, 0.99372698990398, 0.99459352124635, 0.99541192469015, 0.99618487330039, 0.99691489167776, 0.99760436420445, 0.99825554283198, 0.99887055443657, 0.99945140776588, 1];
		test = testArray.collect { |n| n.linbicurve(inMin: 0, outMin: 0, inCenter: 0.3) };
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
		expected = [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -0.99774110887313, -0.99520872840889, -0.99236974660079, -0.98918704249271, -0.98561900080584, -0.98161896780028, -0.97713464125656, -0.97210738660071, -0.96647147023103, -0.96015320002185, -0.95306996176603, -0.94512913895734, -0.93622690178816, -0.92624684952838, -0.91505848853383, -0.90251552598354, -0.88845395703573, -0.87268992039115, -0.8550172942245, -0.83520500104933, -0.8129939862767, -0.78809383096059, -0.76017895444038, -0.72888435722819, -0.69380084847744, -0.6544696956296, -0.61037662628098, -0.56094510384114, -0.50552878905931, -0.44340308884976, -0.37375568191336, -0.29567589727344, -0.20814280684578, -0.11001187634756, 0.0, 0.11001187634756, 0.20814280684578, 0.29567589727344, 0.37375568191336, 0.44340308884976, 0.50552878905931, 0.56094510384114, 0.61037662628098, 0.6544696956296, 0.69380084847744, 0.72888435722819, 0.76017895444038, 0.78809383096059, 0.8129939862767, 0.83520500104933, 0.8550172942245, 0.87268992039115, 0.88845395703573, 0.90251552598354, 0.91505848853383, 0.92624684952838, 0.93622690178816, 0.94512913895734, 0.95306996176603, 0.96015320002185, 0.96647147023103, 0.97210738660071, 0.97713464125656, 0.98161896780028, 0.98561900080584, 0.98918704249271, 0.99236974660079, 0.99520872840889, 0.99774110887313, 1.0];
		test = testArray.collect { |n| n.linbicurve(inMin: 0.3, clip: \min) };
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
		expected = [-1.0180522417006, -1.0179789785406, -1.0178968452349, -1.017804767854, -1.017701542445, -1.0175858192895, -1.0174560852554, -1.0173106440124, -1.0171475938511, -1.0169648028178, -1.0167598808381, -1.0165301484654, -1.0162726018463, -1.0159838734437, -1.0156601880046, -1.0152973131973, -1.0148905042714, -1.0144344420183, -1.0139231632203, -1.0133499826786, -1.0127074058014, -1.0119870306088, -1.0111794378731, -1.0102740679584, -1.0092590827483, -1.0081212108575, -1.0068455741025, -1.0054154929626, -1.0038122684875, -1.0020149378007, -1.0, -0.99774110887313, -0.99520872840889, -0.99236974660079, -0.98918704249271, -0.98561900080584, -0.98161896780028, -0.97713464125656, -0.97210738660071, -0.96647147023103, -0.96015320002185, -0.95306996176603, -0.94512913895734, -0.93622690178816, -0.92624684952838, -0.91505848853383, -0.90251552598354, -0.88845395703573, -0.87268992039115, -0.8550172942245, -0.83520500104933, -0.8129939862767, -0.78809383096059, -0.76017895444038, -0.72888435722819, -0.69380084847744, -0.6544696956296, -0.61037662628098, -0.56094510384114, -0.50552878905931, -0.44340308884976, -0.37375568191336, -0.29567589727344, -0.20814280684578, -0.11001187634756, 0.0, 0.11001187634756, 0.20814280684578, 0.29567589727344, 0.37375568191336, 0.44340308884976, 0.50552878905931, 0.56094510384114, 0.61037662628098, 0.6544696956296, 0.69380084847744, 0.72888435722819, 0.76017895444038, 0.78809383096059, 0.8129939862767, 0.83520500104933, 0.8550172942245, 0.87268992039115, 0.88845395703573, 0.90251552598354, 0.91505848853383, 0.92624684952838, 0.93622690178816, 0.94512913895734, 0.95306996176603, 0.96015320002185, 0.96647147023103, 0.97210738660071, 0.97713464125656, 0.98161896780028, 0.98561900080584, 0.98918704249271, 0.99236974660079, 0.99520872840889, 0.99774110887313, 1];
		test = testArray.collect { |n| n.linbicurve(inMin: 0.3, clip: \max) };
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
		expected = [0.90045541394955, 0.90751008683837, 0.91414371412618, 0.92038142517063, 0.92624684952838, 0.931762206468, 0.93694838914058, 0.94182504372663, 0.94641064385936, 0.95072256060601, 0.95477712827259, 0.95858970628113, 0.96217473735386, 0.96554580222483, 0.96871567108615, 0.97169635196372, 0.97449913620579, 0.97713464125656, 0.97961285087698, 0.98194315296497, 0.98413437511848, 0.98619481807597, 0.98813228716111, 0.98995412185068, 0.99166722357787, 0.9932780818761, 0.99479279896255, 0.99621711285439, 0.99755641910548, 0.99881579124561, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];
		test = testArray.collect { |n| n.linbicurve(inMax: 0.3, clip: \max) };
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
		expected = [0.90045541394955, 0.90751008683837, 0.91414371412618, 0.92038142517063, 0.92624684952838, 0.931762206468, 0.93694838914058, 0.94182504372663, 0.94641064385936, 0.95072256060601, 0.95477712827259, 0.95858970628113, 0.96217473735386, 0.96554580222483, 0.96871567108615, 0.97169635196372, 0.97449913620579, 0.97713464125656, 0.97961285087698, 0.98194315296497, 0.98413437511848, 0.98619481807597, 0.98813228716111, 0.98995412185068, 0.99166722357787, 0.9932780818761, 0.99479279896255, 0.99621711285439, 0.99755641910548, 0.99881579124561, 1.0, 1.0011135313616, 1.0021606035849, 1.0031451831653, 1.004070999865, 1.004941560842, 1.0057601639359, 1.0065299101604, 1.0072537154509, 1.0079343217103, 1.0085743071959, 1.0091760962863, 1.0097419686654, 1.0102740679584, 1.0107744098516, 1.011244889729, 1.011687289852, 1.0121032861106, 1.0124944543726, 1.0128622764528, 1.0132081457265, 1.0135333724079, 1.0138391885134, 1.0141267525287, 1.0143971537973, 1.0146514166473, 1.0148905042714, 1.0151153223759, 1.0153267226119, 1.0155255058009, 1.0157124249689, 1.0158881881988, 1.0160534613131, 1.0162088703956, 1.0163550041634, 1.0164924161973, 1.0166216270384, 1.0167431261603, 1.0168573738233, 1.0169648028178, 1.0170658201038, 1.0171608083529, 1.0172501273973, 1.0173341155934, 1.0174130911034, 1.0174873531007, 1.0175571829027, 1.0176228450372, 1.0176845882441, 1.0177426464175, 1.0177972394921, 1.0178485742761, 1.0178968452349, 1.0179422352274, 1.017984916199, 1.0180250498327, 1.0180627881618, 1.0180982741459, 1.0181316422122, 1.0181630187648, 1.0181925226637, 1.0182202656749, 1.0182463528938, 1.0182708831435, 1.0182939493488, 1.0183156388887, 1.018336033927, 1.0183552117238, 1.0183732449278, 1.0183902018522, 1.0184061467327];
		test = testArray.collect { |n| n.linbicurve(inMax: 0.3, clip: \min) };
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
	}

	test_linenv {
		var expected = [0, 0.010025062656642, 0.020050125313283, 0.030075187969925, 0.040100250626566, 0.050125313283208, 0.06015037593985, 0.070175438596491, 0.080200501253133, 0.090225563909774, 0.10025062656642, 0.11027568922306, 0.1203007518797, 0.13032581453634, 0.14035087719298, 0.15037593984962, 0.16040100250627, 0.17042606516291, 0.18045112781955, 0.19047619047619, 0.20050125313283, 0.21052631578947, 0.22055137844612, 0.23057644110276, 0.2406015037594, 0.25062656641604, 0.26065162907268, 0.27067669172932, 0.28070175438596, 0.29072681704261, 0.30075187969925, 0.31077694235589, 0.32080200501253, 0.33082706766917, 0.34085213032581, 0.35087719298246, 0.3609022556391, 0.37092731829574, 0.38095238095238, 0.39097744360902, 0.40100250626566, 0.41102756892231, 0.42105263157895, 0.43107769423559, 0.44110275689223, 0.45112781954887, 0.46115288220551, 0.47117794486216, 0.4812030075188, 0.49122807017544, 0.50125313283208, 0.51127819548872, 0.52130325814536, 0.531328320802, 0.54135338345865, 0.55137844611529, 0.56140350877193, 0.57142857142857, 0.58145363408521, 0.59147869674185, 0.6015037593985, 0.61152882205514, 0.62155388471178, 0.63157894736842, 0.64160401002506, 0.6516290726817, 0.66165413533835, 0.67167919799499, 0.68170426065163, 0.69172932330827, 0.70175438596491, 0.71177944862155, 0.7218045112782, 0.73182957393484, 0.74185463659148, 0.75187969924812, 0.76190476190476, 0.7719298245614, 0.78195488721805, 0.79197994987469, 0.80200501253133, 0.81203007518797, 0.82205513784461, 0.83208020050125, 0.84210526315789, 0.85213032581454, 0.86215538847118, 0.87218045112782, 0.88220551378446, 0.8922305764411, 0.90225563909774, 0.91228070175439, 0.92230576441103, 0.93233082706767, 0.94235588972431, 0.95238095238095, 0.96240601503759, 0.97243107769424, 0.98245614035088, 0.99248120300752, 1];
		var test = testArray.collect { |n| n.linenv(env: Env([0, 1], [1], \lin)) };
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
		expected = [0, 0.03466783537123, 0.068173921891632, 0.10055719076005, 0.13185526855752, 0.16210452096613, 0.1913400950228, 0.21959595995717, 0.24690494666089, 0.27329878583433, 0.2988081448549, 0.32346266340995, 0.3472909879355, 0.370320804901, 0.39257887297857, 0.41409105413434, 0.43488234367778, 0.45497689930416, 0.47439806916368, 0.49316841899003, 0.51130975831985, 0.52884316583354, 0.54578901384683, 0.56216699198176, 0.57799613004422, 0.59329482013505, 0.60808083802002, 0.62237136378377, 0.63618300179159, 0.64953179998227, 0.66243326851445, 0.67490239778803, 0.68695367586181, 0.69860110528732, 0.7098582193786, 0.72073809793673, 0.73125338244747, 0.74141629076958, 0.75123863133088, 0.76073181684868, 0.76990687759037, 0.77877447418961, 0.78734491003311, 0.79562814323226, 0.80363379819363, 0.81137117680166, 0.81884926922669, 0.82607676437074, 0.83306205996331, 0.83981327231877, 0.84633824576685, 0.85264456176707, 0.85873954771775, 0.86463028546984, 0.87032361955536, 0.87582616514023, 0.88114431571049, 0.88628425050099, 0.8912519416751, 0.89605316126393, 0.90069348787285, 0.9051783131634, 0.90951284811791, 0.91370212909426, 0.91775102367762, 0.92166423633626, 0.92544631388765, 0.92910165078155, 0.93263449420591, 0.9360489490218, 0.93934898253286, 0.94253842909501, 0.9456209945716, 0.94860026063934, 0.95147968894988, 0.95426262515195, 0.95695230277875, 0.95955184700499, 0.96206427827811, 0.96449251582776, 0.96683938105772, 0.96910760082411, 0.97129981060375, 0.97341855755639, 0.97546630348428, 0.97744542769255, 0.9793582297538, 0.98120693217995, 0.98299368300469, 0.98472055827922, 0.9863895644845, 0.9880026408626, 0.98956166166993, 0.99106843835495, 0.99252472166293, 0.99393220367019, 0.9952925197501, 0.99660725047327, 0.99787792344405, 0.99910601507545, 1];
		test = testArray.collect { |n| n.linenv(env: Env([0, 1], [1], -3.4))};
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
		expected = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.8162608233631e-14, 0.37191057280639, 0.5539762918248, 0.6431050460615, 0.68673728432478, 0.69496954023465, 0.70009451928727, 0.70834537496856, 0.72162867208539, 0.74301384583098, 0.77744247090097, 0.83287013486629, 0.92210477396112, 0.98770858142326, 0.91345661643494, 0.66926812515797, 0.56544651625172, 0.48635316590535, 0.37389338231594, 0.21399115451056, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
		test = (-2, -1.95..3).collect { |n| n.linenv(env: Env([0.5, 2.3, 3.1, 2.1, 0.5], [2, 4, 1.2, 2.3], [-3, 4, 3, 1.7])) };
		this.assertArrayFloatEquals(test, expected, "Resulting and expected array should equal (floating point precision)");
	}
}